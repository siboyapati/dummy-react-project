{"version":3,"sources":["../../src/routes/googleAuth.js"],"names":["router","get","passport","authenticate","scope","clientUrl","process","env","NODE_ENV","CLIENT_URL_PROD","CLIENT_URL_DEV","failureRedirect","session","req","res","token","user","generateJWT","cookie","redirect"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,MAAM,GAAG,sBAAf;AAEAA,MAAM,CAACC,GAAP,CACE,SADF,EAEEC,kBAASC,YAAT,CAAsB,QAAtB,EAAgC;AAC9BC,EAAAA,KAAK,EAAE,CAAC,SAAD,EAAY,OAAZ;AADuB,CAAhC,CAFF;AAOA,MAAMC,SAAS,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GAAwCF,OAAO,CAACC,GAAR,CAAYE,eAApD,GAAsEH,OAAO,CAACC,GAAR,CAAYG,cAApG;AAEAV,MAAM,CAACC,GAAP,CACE,kBADF,EAEEC,kBAASC,YAAT,CAAsB,QAAtB,EAAgC;AAC9BQ,EAAAA,eAAe,EAAE,GADa;AAE9BC,EAAAA,OAAO,EAAE;AAFqB,CAAhC,CAFF,EAME,CAACC,GAAD,EAAMC,GAAN,KAAc;AACZ,QAAMC,KAAK,GAAGF,GAAG,CAACG,IAAJ,CAASC,WAAT,EAAd;AACAH,EAAAA,GAAG,CAACI,MAAJ,CAAW,eAAX,EAA4BH,KAA5B;AACAD,EAAAA,GAAG,CAACK,QAAJ,CAAad,SAAb;AACD,CAVH;eAaeL,M","sourcesContent":["import { Router } from 'express';\nimport passport from 'passport';\n\nconst router = Router();\n\nrouter.get(\n  '/google',\n  passport.authenticate('google', {\n    scope: ['profile', 'email'],\n  }),\n);\n\nconst clientUrl = process.env.NODE_ENV === 'production' ? process.env.CLIENT_URL_PROD : process.env.CLIENT_URL_DEV;\n\nrouter.get(\n  '/google/callback',\n  passport.authenticate('google', {\n    failureRedirect: '/',\n    session: false,\n  }),\n  (req, res) => {\n    const token = req.user.generateJWT();\n    res.cookie('x-auth-cookie', token);\n    res.redirect(clientUrl);\n  },\n);\n\nexport default router;\n"],"file":"googleAuth.js"}